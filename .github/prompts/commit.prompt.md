---
mode: 'agent'
description: '建立格式良好的提交訊息'
tools: ['edit', 'runCommands', 'changes', 'readFile']
---

## 任務
此 command 協助您建立格式良好的提交訊息，主要使用繁體中文（台灣）。

## 任務清單
[ ] 1. OS 是 Windows，讀取 Windows 注意事項文件
[ ] 2. 執行 `git status` 檢查哪些檔案已暫存，如果沒有檔案暫存，會自動使用 `git add` 新增所有修改和新增的檔案
[ ] 3. 檢查差異，執行 `git diff` 來了解將要提交的變更
[ ] 4. 分析變更內容以確定是否存在多個不同的邏輯變更
[ ] 5. 若有不同的邏輯變更，向使用者詢問是否要拆分成多個提交
[ ] 6. 需要根據訊息單行或多行，調整輸出方法和格式，建立提交訊息。(多行務必建立文字檔案)
[ ] 7. 執行 `git commit` 來提交變更
[ ] 8. 若為多行提交變更，需要確認 `commit_msg.txt` 檔案已刪除
[ ] 9. 根據執行內容 `git status` 結果，若發現有 git 版本控制的 `.github` 資料夾，則以 markdown 格式告知 `.github 資料夾忽略方法`

## 檢查暫存檔案

當檢查到有 `.github` 資料夾時，且內部有 git 做版本控制時，請忽略 `.github` 內的檔案。並可告知下面內容

`.github 資料夾忽略方法`：
```markdown
目前檢測到 `.github` 資料夾，且內部有 git 做版本控制，這次會自動忽略 `.github` 內的檔案，並執行提交變更。

您可請參考以下步驟來忽略該資料夾：

1. 在 `.gitignore` 檔案中新增 `.github/` 以忽略該資料夾

```
echo '.github/' >> .gitignore
```

2. 執行以下命令，讓 Git 忽略已經被追蹤的 `.github` 資料夾

```
git update-index --assume-unchanged .gitignore
```

3. 當未來需要再次追蹤 `.github` 資料夾時，執行以下命令

```
git update-index --no-assume-unchanged .gitignore
```

4. 重新恢復 `.gitignore` 檔案的原始狀態

```
git checkout -- .gitignore
```

```

## 提交最佳實踐
**原子性提交**：每個提交應包含服務於單一目的的相關變更
**拆分大型變更**：如果變更涉及多個關注點，將它們拆分成單獨的提交
**慣例提交格式**：使用格式 (<type>): <中文描述>，其中 type 為以下之一：
    - feat: 新功能
    - fix: 錯誤修復
    - docs: 文件變更
    - style: 程式碼風格變更（格式化等）
    - refactor: 既不修復錯誤也不新增功能的程式碼變更
    - perf: 效能改善
    - test: 新增或修復測試
    - chore: 建置流程、工具等變更

## 拆分提交指引
分析差異時，請根據以下標準考慮拆分提交：
- 不同關注點：對程式碼庫無關部分的變更
- 不同類型的變更：混合功能、修復、重構等
- 檔案模式：對不同類型檔案的變更（例如，原始碼與文件）
- 邏輯分組：單獨理解或審查會更容易的變更
- 大小：非常大的變更，拆分後會更清楚

## 範例
### 良好的提交訊息：
- (feat): 新增使用者驗證系統
- (fix): 解決渲染過程中的記憶體洩漏
- (docs): 更新 API 文件包含新端點
- (refactor): 簡化解析器中的錯誤處理邏輯
- (fix): 解決元件檔案中的檢查器警告
- (chore): 改善開發者工具設置流程
- (feat): 實作交易驗證的商業邏輯
- (fix): 處理標頭中的輕微樣式不一致
- (fix): 修補驗證流程中的關鍵安全漏洞
- (style): 重新組織元件結構以提高可讀性
- (fix): 移除已棄用的舊程式碼
- (feat): 為使用者註冊表單新增輸入驗證
- (fix): 解決失敗的 CI 管道測試
- (feat): 實作使用者參與的分析追蹤
- (fix): 強化驗證密碼要求
- (feat): 改善表單對螢幕閱讀器的無障礙性

### 拆分提交範例：
- 第一個提交：(feat): 新增新的 solc 版本型別定義
- 第二個提交：(docs): 更新新的 solc 版本的文件
- 第三個提交：(chore): 更新 package.json 相依性
- 第四個提交：(feat): 新增新 API 端點的型別定義
- 第五個提交：(feat): 改善工作執行緒中的並發處理
- 第六個提交：(fix): 解決新程式碼中的檢查問題
- 第七個提交：(test): 為新 solc 版本功能新增單元測試
- 第八個提交：(fix): 更新具有安全性的相依性

## 執行規則
- 如果特定檔案已經暫存，command 將只提交這些檔案
- 如果沒有檔案暫存，它會自動暫存所有修改和新增的檔案
- 提交訊息將基於檢測到的變更來建構
- 在提交之前，command 會檢視差異以確定是否更適合多個提交
- 如果建議多個提交，它會協助您分別暫存和提交變更
- 始終檢視提交差異以確保訊息與變更匹配
- 提交訊息語言為正體中文（台灣）。除非是程式碼、命令、既有英文專有名詞，否則統一以正體中文敘述

## 根據單行或多行調整輸出方法和格式
### 單行提交訊息
- (fix): 強化驗證密碼要求
- (feat): 改善表單對螢幕閱讀的無障礙性
- (refactor): 簡化解析器中的錯誤處理邏輯
- (fix): 解決元件檔案中的檢查器警告

### 多行提交訊息
請使用以下方法
1. 建立 commit_msg.txt (UTF-8 編碼)：

文檔規範：
- 第一行是標題，接下來的行數是詳細說明，以 markdown 格式撰寫，不要使用 emoji。
- 簡潔的第一行：將第一行保持在 72 個字元以內，提供具整合、清晰的變更描述
    - (feat): 新功能
    - (feat): 更新 OpenAPI
    - (fix): 錯誤修復
    - (docs): 文件更新
    - (style): 格式化/風格
    - (refactor): 程式碼重構
    - (perf): 效能改善
    - (test): 測試
    - (chore): 工具、設定
    - (ci): CI/CD 改善
    - (revert): 撤銷變更
    - (test): 新增失敗測試
    - (fix): 修復編譯器/檢查器警告
    - (fix): 修復安全問題
    - (chore): 新增或更新貢獻者
    - (refactor): 移動或重新命名資源
    - (refactor): 進行架構變更
    - (chore): 合併分支
    - (chore): 新增或更新編譯檔案或套件
    - (chore): 新增相依性
    - (chore): 移除相依性
    - (chore): 新增或更新種子檔案
    - (chore): 改善開發者體驗
    - (feat): 新增或更新多執行緒或並發相關程式碼
    - (feat): 改善 SEO
    - (feat): 新增或更新型別
    - (feat): 新增或更新文字和字面值
    - (feat): 國際化和本地化
    - (feat): 新增或更新商業邏輯
    - (feat): 處理響應式設計
    - (feat): 改善使用者體驗/可用性
    - (fix): 修復非關鍵問題的簡單修復
    - (fix): 捕捉錯誤
    - (fix): 由於外部 API 變更而更新程式碼
    - (fix): 移除程式碼或檔案
    - (style): 改善程式碼結構/格式
    - (fix): 關鍵熱修復
    - (chore): 開始專案
    - (chore): 發布/版本標籤
    - (wip): 進行中的工作
    - (fix): 修復 CI 建置
    - (chore): 將相依性固定到特定版本
    - (ci): 新增或更新 CI 建置系統
    - (feat): 新增或更新分析或追蹤程式碼
    - (fix): 修復拼寫錯誤
    - (chore): 新增或更新授權
    - (feat): 引入破壞性變更
    - (assets): 新增或更新資源
    - (feat): 改善無障礙性
    - (docs): 在原始碼中新增或更新註解
    - (db): 執行資料庫相關變更
    - (feat): 新增或更新日誌
    - (fix): 移除日誌
    - (test): 模擬物件
    - (feat): 新增或更新彩蛋
    - (chore): 新增或更新 .gitignore 檔案
    - (test): 新增或更新快照
    - (experiment): 執行實驗
    - (feat): 新增、更新或移除功能標誌
    - (ui): 新增或更新動畫和過渡效果
    - (refactor): 移除無用程式碼
    - (feat): 新增或更新驗證相關程式碼
    - (feat): 改善離線支援

commit_msg.txt
```
(fix): 標題
- 詳細說明1
- 詳細說明2
```

2. 使用下列命令提交：
```bash
git commit -F commit_msg.txt
```

3. 刪除 commit_msg.txt